const dailyContent = {
  "date": "2026å¹´2æœˆ16æ—¥",
  "dateEn": "February 16, 2026",
  "rss": [
    {
      "title": "GPT-5.2 åœ¨ç†è®ºç‰©ç†ä¸Šç»™å‡ºæ–°ç»“æœï¼ˆé¢„å°æœ¬ï¼‰",
      "source": "OpenAI Blog",
      "summary": "OpenAI ä»‹ç»äº†ä¸€ç¯‡é¢„å°æœ¬ï¼šGPT-5.2 æå‡ºä¸€ä¸ªå…³äºèƒ¶å­æ•£å°„æŒ¯å¹…çš„å…¬å¼ï¼Œéšåç”±å†…éƒ¨æ¨¡å‹ä¸ä½œè€…ä¾§éªŒè¯ï¼Œè®ºæ–‡å·²ä¸Š arXiv å¹¶æŠ•ç¨¿ä¸­",
      "url": "https://openai.com/index/new-result-theoretical-physics/?utm_source=chatgpt.com",
      "time": "10:00"
    },
    {
      "title": "ChatGPT å¼•å…¥é”å®šæ¨¡å¼ä¸é«˜é£é™©èƒ½åŠ›æ ‡ç­¾",
      "source": "OpenAI Blog",
      "summary": "é¢å‘é«˜é£é™©ç”¨æˆ·/ç»„ç»‡ï¼ˆå¦‚é«˜ç®¡ã€å®‰å…¨å›¢é˜Ÿï¼‰çš„å¯é€‰å®‰å…¨è®¾ç½®ï¼šé€šè¿‡æ›´å¼ºçº¦æŸæ¥é™ä½æç¤ºæ³¨å…¥å¯¼è‡´çš„æ•°æ®å¤–æ³„é£é™©ï¼Œå¹¶å¯¹æŸäº›é«˜é£é™©èƒ½åŠ›åŠ å¯è§æ ‡ç­¾",
      "url": "https://openai.com/index/introducing-lockdown-mode-and-elevated-risk-labels-in-chatgpt/?utm_source=chatgpt.com",
      "time": "09:00"
    },
    {
      "title": "GPT-5.3-Codex-Sparkï¼šé¢å‘å®æ—¶ç¼–ç çš„è¶…ä½å»¶è¿Ÿæ¨¡å‹",
      "source": "OpenAI Blog",
      "summary": "ä¸»æ‰“å®æ—¶åä½œå†™ä»£ç ï¼Œå®£ç§°å¯è¾¾1000+ tokens/sã€128k ä¸Šä¸‹æ–‡ã€æ–‡æœ¬-onlyï¼›é€šè¿‡ WebSocket ç­‰ä¼˜åŒ–æŠŠç«¯åˆ°ç«¯å»¶è¿Ÿæ˜¾è‘—å‹ä½ï¼Œä¸”ç”± Cerebras ç¡¬ä»¶æ”¯æ’‘",
      "url": "https://openai.com/zh-Hans-CN/index/introducing-gpt-5-3-codex-spark/?utm_source=chatgpt.com",
      "time": "08:00"
    },
    {
      "title": "Codex / Sora çš„è®¿é—®æ§åˆ¶å‡çº§",
      "source": "OpenAI Blog",
      "summary": "OpenAI å·¥ç¨‹å‘æ–‡ç« è§£é‡Šä¸ºä½•å•çº¯æé«˜ rate limit æˆ–çº¯æŒ‰é‡è®¡è´¹éƒ½ä¸å¤Ÿï¼Œå¹¶ç”¨å®æ—¶é™æµè§¦é¡¶åæ— ç¼åˆ‡é¢åº¦çš„æ··åˆæ¨¡å‹æ¥æ‰©å®¹ä½“éªŒä¸å…¬å¹³æ€§",
      "url": "https://openai.com/index/beyond-rate-limits/?utm_source=chatgpt.com",
      "time": "07:00"
    }
  ],
  "ai": [
    {
      "title": "é»‘çŸ³åŠ ç å°åº¦æœ¬åœŸ AI ç®—åŠ›ï¼ŒNeysa è®¡åˆ’æœ€é«˜ 12 äº¿ç¾å…ƒèèµ„",
      "source": "TechCrunch",
      "summary": "é»‘çŸ³åŠå…±åŒæŠ•èµ„æ–¹æ‹Ÿå‘å°åº¦ AI åŸºç¡€è®¾æ–½å…¬å¸ Neysa æŠ•å…¥æœ€é«˜ 6 äº¿ç¾å…ƒè‚¡æƒå¹¶æ¨åŠ¨å…¶å†èèµ„ 6 äº¿ç¾å…ƒå€ºåŠ¡ï¼›å…¬å¸ GPU è§„æ¨¡ä»çº¦ 1,200 è®¡åˆ’æ‰©å¼ åˆ° 20,000+",
      "url": "https://techcrunch.com/2026/02/15/blackstone-backs-neysa-in-up-to-1-2b-financing-as-india-pushes-to-build-domestic-ai-compute/?utm_source=chatgpt.com"
    },
    {
      "title": "Googleï¼šé’ˆå¯¹ Gemini çš„æ¨¡å‹è’¸é¦/æŠ½å–æ”»å‡»å¢å¤šï¼Œå‡ºç° 10 ä¸‡+ æç¤ºè¯è§„æ¨¡æ¡ˆä¾‹",
      "source": "Google Cloud",
      "summary": "Google Threat Intelligence Group æŠ¥å‘Šï¼šè§‚å¯Ÿåˆ°æ›´å¤šå°† AI ç”¨äºæ”»å‡»é“¾æ¡çš„è¡Œä¸ºï¼Œå¹¶æŠ«éœ²ä¸€ç±»é€¼å‡ºæ¨ç†ç—•è¿¹çš„æŠ½å–æ”»å‡»æ¡ˆä¾‹ï¼Œè§„æ¨¡è¾¾åˆ° 10 ä¸‡+ prompts",
      "url": "https://cloud.google.com/blog/topics/threat-intelligence/distillation-experimentation-integration-ai-adversarial-use?utm_source=chatgpt.com"
    },
    {
      "title": "AI å£°éŸ³åˆèµ·è¯‰è®¼ï¼šNPR ä¸»æ’­å°± NotebookLM è¯­éŸ³æå‘Š Google",
      "source": "Washington Post",
      "summary": "ä¸€ä½é•¿æœŸ NPR ä¸»æ’­èµ·è¯‰ Googleï¼ŒæŒ‡æ§å…¶åœ¨ NotebookLM é‡Œä½¿ç”¨äº† AI è¯­éŸ³ä¸”æœªç»åŒæ„ï¼›è¿™ç±»æ¡ˆä»¶é€šå¸¸ä¼šæŠŠç„¦ç‚¹æ‹‰åˆ°å£°éŸ³æƒ/æˆæƒã€è®­ç»ƒä¸åˆæˆè¾¹ç•Œä¸Š",
      "url": "https://www.washingtonpost.com/technology/2026/02/15/google-notebooklm-ai-voice-lawsuit-npr/"
    }
  ],
  "thoughts": [],
  "rec": [
    {
      "title": "AI Agent è®°å¿†è¶Šå¤šåè€Œè¶Šè ¢ï¼ŸOpenClaw è®°å¿†ç®¡ç†å®æˆ˜",
      "source": "x/@xxx111god",
      "summary": "MEMORY.md è†¨èƒ€åˆ° 427 è¡Œï¼Œæ¯æ¬¡å¯¹è¯åƒæ‰ 2 ä¸‡ tokenã€‚å‘ç°è’è°¬çš„äº‹å®ï¼šè®°å¿†è¶Šå¤šï¼ŒAI åè€Œè¶Šè ¢ã€‚ä¿¡æ¯æ·¹æ²¡äº†ã€‚è§£å†³æ–¹æ¡ˆï¼šä¸‰å±‚æ¶æ„ + è‡ªåŠ¨å½’æ¡£ï¼ŒToken é™ 78%",
      "url": "https://x.com/xxx111god/status/2021278572611060145"
    },
    {
      "title": "åˆ«å†ç”¨æç¤ºè¯å» AI å‘³äº†ï¼Œæ–¹å‘å°±æ˜¯é”™çš„",
      "source": "x/@dotey",
      "summary": "æ‰€æœ‰äººç”¨åŒä¸€å¥—å» AI å‘³æç¤ºè¯ï¼Œäº§å‡ºåˆå˜æˆäº†æ–°çš„åŒè´¨åŒ–ã€‚æç¤ºè¯æ˜¯ä¸€æ¬¡æ€§çš„ã€‚ä½ ä»æ¥æ²¡å‘Šè¯‰ AI è¦åƒè°ã€‚ä½ è·Ÿå®ƒè¯´äº†ä¸€å †ä¸è¦ï¼Œä½†å®ƒè¿˜æ˜¯ä¸çŸ¥é“ä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆå‘³é“",
      "url": "https://x.com/dotey/status/2022774029220749538"
    },
    {
      "title": "OpenClaw Token èŠ‚çº¦ç»ˆææŒ‡å—",
      "source": "x/@ohxiyu",
      "summary": "ä½ ä»¥ä¸º token åªæ˜¯ä½ è¯´çš„è¯ + AI å›çš„è¯ï¼Ÿå®é™…è¿œä¸æ­¢ã€‚System Promptï¼ˆ~5000ï¼‰+ ä¸Šä¸‹æ–‡æ³¨å…¥ï¼ˆ~14000ï¼‰ã€‚ä¸€ä¸ªä»Šå¤©å¤©æ°”æ¶ˆè€— 8000-15000 tokensã€‚Cron ä¸€å¤© 96 æ¬¡ï¼ŒOpus ä¸‹ä¸€å¤© $10-20",
      "url": "https://x.com/ohxiyu/status/2020131912149508338"
    },
    {
      "title": "Agent å‡çº§ç¿»è½¦å®å½•ï¼šç°å®çš„åº•å±‚é€»è¾‘æ˜¯æ¦‚ç‡åˆ†å¸ƒ",
      "source": "x/@xxx111god",
      "summary": "ç¡å‰è®© Agent è‡ªå·±å‡çº§ï¼šupdate yourselfã€‚æ—©ä¸Šé†’æ¥å®šæ—¶ä»»åŠ¡å…¨æ²¡è·‘ã€‚æ—¥å¿—å¾ªç¯ï¼šå‡çº§å¤±è´¥ â†’ å´©æºƒ â†’ é‡å¯ â†’ åˆå´©æºƒã€‚AGENTS.md é‡Œæ˜æ˜å†™ç€å‡çº§è§„åˆ™ï¼Œå…¨éƒ¨å¿½ç•¥äº†",
      "url": "https://x.com/xxx111god/status/2022352959133151433"
    },
    {
      "title": "å¦‚ä½•ç”¨ Claude Code æ­å»ºå¯è¿­ä»£çš„æ°¸ç»­ AI å·¥ä½œç³»ç»Ÿ",
      "source": "x/@Roland_WayneOZ",
      "summary": "ç¬¬ä¸€ä»£ç³»ç»Ÿé—®é¢˜ï¼šå®ƒæ˜¯é™æ€çš„ã€‚çœŸæ­£çš„æ°¸ç»­ç³»ç»Ÿåº”è¯¥æ˜¯ä½ ç”¨å®ƒï¼Œå®ƒå°±åœ¨è¿›åŒ–ã€‚æ ¸å¿ƒå˜åŒ–ï¼šç¬¬ä¸€ä»£ä½ ç»´æŠ¤ç³»ç»Ÿï¼Œç¬¬äºŒä»£ç³»ç»Ÿç»´æŠ¤è‡ªå·±",
      "url": "https://x.com/Roland_WayneOZ/status/2022850233861075105"
    },
    {
      "title": "å’¸é±¼æ™ºèƒ½ç›‘æ§ - é—²é±¼å¹³å° AI è‡ªåŠ¨åŒ–ç›‘æ§å·¥å…·",
      "source": "GitHub",
      "summary": "å…³é”®è¯æ™ºèƒ½ç›‘æ§ã€ä»·æ ¼å˜åŒ–æ•æ‰ã€è‡ªåŠ¨åŒ–è¿è¡Œã€è§£æ”¾æ³¨æ„åŠ›ã€‚ç¬¬ä¸€æ—¶é—´å‘ç°é™ä»·ã€ä½ä»·ä¸Šæ–°ï¼ŒæŠŠæ—¶é—´è¿˜ç»™ä½ è€Œä¸æ˜¯åˆ·åˆ—è¡¨",
      "url": "https://github.com/Usagi-org/ai-goofish-monitor"
    }
  ],
  "archive": [
    {
      "date": "2026å¹´2æœˆ15æ—¥",
      "dateEn": "February 15, 2026",
      "rss": [
        {"title": "The great computer science exodus", "source": "TechCrunch", "summary": "Students losing interest in CS but gaining interest in AI-specific majors", "url": "https://techcrunch.com/2026/02/15/the-great-computer-science-exodus/"},
        {"title": "Is safety 'dead' at xAI?", "source": "TechCrunch", "summary": "Elon Musk working to make Grok more unhinged", "url": "https://techcrunch.com/2026/02/14/is-safety-is-dead-at-xai/"},
        {"title": "GitHub Agentic Workflows", "source": "GitHub Blog", "summary": "Automate repository tasks with coding agents", "url": "https://github.blog/ai-and-ml/automate-repository-tasks-with-github-agentic-workflows/"},
        {"title": "GPT-5.2 theoretical physics result", "source": "OpenAI Blog", "summary": "New formula for gluon amplitude proposed by GPT-5.2", "url": "https://openai.com/index/new-result-theoretical-physics"},
        {"title": "Lockdown Mode in ChatGPT", "source": "OpenAI Blog", "summary": "New security features for high-risk users", "url": "https://openai.com/index/introducing-lockdown-mode-and-elevated-risk-labels-in-chatgpt"}
      ],
      "ai": [
        {"title": "Agent Frameworks and Observability", "source": "LangChain", "summary": "Discussion on whether agent frameworks are still needed", "url": "https://blog.langchain.com/on-agent-frameworks-and-agent-observability/"},
        {"title": "Eternal September of open source", "source": "GitHub Blog", "summary": "Open source hitting Eternal September moment", "url": "https://github.blog/open-source/maintainers/welcome-to-the-eternal-september-of-open-source/"},
        {"title": "Interrupt: The Agent Conference", "source": "LangChain", "summary": "LangChain's agent conference for builders", "url": "https://blog.langchain.com/join-us-for-interrupt-the-agent-conference/"}
      ],
      "rec": [
        {"title": "Secure-OpenClaw: 24/7 AI Assistant", "source": "GitHub", "summary": "Personal AI assistant that runs on messaging platforms", "url": "https://github.com/ComposioHQ/secure-openclaw"}
      ]
    }
  ]
};

// è¯­è¨€
let currentLang = 'zh';

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
  // æ¢å¤è¯­è¨€è®¾ç½®
  const savedLang = localStorage.getItem('dailyDigest_lang');
  if (savedLang) {
    currentLang = savedLang;
    const btn = document.getElementById('langToggle');
    if (btn) btn.textContent = currentLang === 'zh' ? 'EN/ä¸­' : 'ä¸­/EN';
  }
  
  renderAll();
  initTheme();
});

// æ¸²æŸ“æ‰€æœ‰å†…å®¹
function renderAll() {
  const isEn = currentLang === 'en';
  let globalIndex = 0;  // å…¨å±€ç¼–å·è®¡æ•°å™¨
  
  // æ—¥æœŸ - æ ¹æ®è¯­è¨€åˆ‡æ¢
  document.getElementById('currentDate').textContent = isEn ? dailyContent.dateEn : dailyContent.date;
  document.getElementById('currentDate2').textContent = isEn ? dailyContent.dateEn : dailyContent.date;
  
  // æ›´æ–°å¯¼èˆªæŒ‰é’®æ–‡æœ¬
  document.querySelectorAll('.nav-btn').forEach(btn => {
    const section = btn.dataset.section;
    const textMap = {
      'rss-articles': isEn ? 'ğŸ“¡ RSS' : 'ğŸ“¡ RSSæ–‡ç« ',
      'ai-news': isEn ? 'ğŸ¤– AI News' : 'ğŸ¤– AIæ–°é—»',
      'thoughts': isEn ? 'ğŸ’­ Thoughts' : 'ğŸ’­ ä¸ªäººæ€è€ƒ',
      'recommendations': isEn ? 'ğŸ“Œ Rec' : 'ğŸ“Œ ä¸ªäººæ¨è',
      'archive': isEn ? 'ğŸ“… Archive' : 'ğŸ“… å¾€æ—¥å›é¡¾',
      'favorites': isEn ? 'â¤ï¸ Favorites' : 'â¤ï¸ æˆ‘çš„æ”¶è—'
    };
    if (textMap[section]) btn.textContent = textMap[section];
  });
  
  // RSS - ä» #1 å¼€å§‹
  globalIndex = renderList('rssArticlesContent', dailyContent.rss, 'rss', globalIndex);
  
  // AI - ç»§ç»­ç¼–å·
  globalIndex = renderList('aiNewsContent', dailyContent.ai, 'ai', globalIndex);
  
  // æ€è€ƒ - ç»§ç»­ç¼–å·ï¼ˆä¸å ç”¨ç¼–å·ï¼Œå› ä¸ºé€šå¸¸æ²¡æœ‰ç¼–å·éœ€æ±‚ï¼‰
  // globalIndex = renderThoughts(globalIndex);  // å¦‚æœæƒ³ç»™æ€è€ƒç¼–å·ï¼Œå–æ¶ˆæ³¨é‡Š
  renderThoughts();
  
  // æ¨è - ç»§ç»­ç¼–å·
  globalIndex = renderList('recommendationsContent', dailyContent.rec, 'rec', globalIndex);
  
  // å¾€æ—¥å›é¡¾ - ä½¿ç”¨ç‹¬ç«‹çš„ç¼–å·
  renderArchive();
}

// æ¸²æŸ“åˆ—è¡¨ - å¸¦æ‘˜è¦æ˜¾ç¤º
function renderList(containerId, items, type, startIndex = 0) {
  const container = document.getElementById(containerId);
  if (!container) return startIndex;
  
  const isEn = currentLang === 'en';
  
  if (items.length === 0) {
    container.innerHTML = `<div class="empty-state">${isEn ? 'No content' : 'æš‚æ— å†…å®¹'}</div>`;
    return startIndex;
  }
  
  container.innerHTML = items.map((item, index) => {
    const globalIndex = startIndex + index + 1;  // å…¨å±€ç¼–å·
    const title = item.title || (isEn ? 'Untitled' : 'æ— æ ‡é¢˜');
    const summary = item.summary || '';
    const source = item.source || '';
    const url = item.url || '';
    const time = item.time || '';
    
    // å¦‚æœæ²¡æœ‰URLï¼Œä¸æ˜¾ç¤ºé“¾æ¥
    const linkHtml = url && url !== '#' ? `
      <div class="article-footer">
        <a href="${escapeHtml(url)}" target="_blank" class="article-link">${isEn ? 'Read more â†’' : 'é˜…è¯»å…¨æ–‡ â†’'}</a>
      </div>
    ` : '';
    
    return `
      <div class="article-card" style="position: relative;">
        <span class="article-number">#${globalIndex}</span>
        <div class="article-header">
          <div class="article-title">${escapeHtml(title)}</div>
        </div>
        <div class="article-meta">
          ${source ? `<span class="article-source">${escapeHtml(source)}</span>` : ''}
          ${time ? `<span class="article-date">${escapeHtml(time)}</span>` : ''}
        </div>
        ${summary ? `<div class="article-summary">${escapeHtml(summary)}</div>` : ''}
        ${linkHtml}
      </div>
    `;
  }).join('');
  
  return startIndex + items.length;  // è¿”å›ä¸‹ä¸€ä¸ªèµ·å§‹ç¼–å·
}

// æ¸²æŸ“æ€è€ƒ
function renderThoughts() {
  const container = document.getElementById('thoughtsContent');
  if (!container) return;
  
  const isEn = currentLang === 'en';
  
  if (dailyContent.thoughts.length === 0) {
    container.innerHTML = `<div class="empty-state">${isEn ? 'No thoughts' : 'æš‚æ— æ€è€ƒ'}</div>`;
    return;
  }
  
  container.innerHTML = dailyContent.thoughts.map(item => `
    <div class="thought-card">
      <div class="thought-content">${escapeHtml(item.content || '')}</div>
      <div class="thought-time">${escapeHtml(item.time || '')}</div>
    </div>
  `).join('');
}

// æ¸²æŸ“å¾€æ—¥å›é¡¾
function renderArchive() {
  const container = document.getElementById('archiveList');
  if (!container) return;
  
  const archive = dailyContent.archive || [];
  const isEn = currentLang === 'en';
  
  if (archive.length === 0) {
    container.innerHTML = `<div class="empty-state">${isEn ? 'No archive' : 'æš‚æ— å†å²å†…å®¹'}</div>`;
    return;
  }
  
  // è®¡ç®—ä»Šæ—¥æ–‡ç« æ€»æ•°ï¼Œä½œä¸ºå¾€æ—¥å›é¡¾çš„èµ·å§‹ç¼–å·
  const todayCount = dailyContent.rss.length + dailyContent.ai.length + dailyContent.rec.length;
  
  // æ—¥æœŸé€‰æ‹©å™¨ + å†…å®¹åŒºåŸŸ
  container.innerHTML = `
    <div class="archive-container">
      <!-- æ—¥æœŸé€‰æ‹©ä¾§è¾¹æ  -->
      <div class="archive-sidebar">
        <div class="archive-sidebar-title">${isEn ? 'ğŸ“… Select Date' : 'ğŸ“… é€‰æ‹©æ—¥æœŸ'}</div>
        <div class="archive-date-list">
          ${archive.map((day, index) => `
            <div class="archive-date-item ${index === 0 ? 'active' : ''}" data-index="${index}">
              <span class="archive-date-text">${escapeHtml(isEn ? day.dateEn : day.date)}</span>
              <span class="archive-date-count">${(day.rss?.length || 0) + (day.ai?.length || 0) + (day.rec?.length || 0)}${isEn ? ' items' : 'ç¯‡'}</span>
            </div>
          `).join('')}
        </div>
      </div>
      
      <!-- å†…å®¹å±•ç¤ºåŒº -->
      <div class="archive-content">
        ${archive.map((day, index) => {
          // è®¡ç®—è¿™ä¸€å¤©çš„èµ·å§‹ç¼–å·
          let dayStartIndex = todayCount;
          for (let i = 0; i < index; i++) {
            dayStartIndex += archive[i].rss?.length || 0;
            dayStartIndex += archive[i].ai?.length || 0;
            dayStartIndex += archive[i].rec?.length || 0;
          }
          
          // æ¸²æŸ“å„ä¸ªæ¿å—
          const rssResult = renderArchiveItems(day.rss, 'rss', dayStartIndex);
          const aiResult = renderArchiveItems(day.ai, 'ai', dayStartIndex + rssResult.count);
          const recResult = renderArchiveItems(day.rec, 'rec', dayStartIndex + rssResult.count + aiResult.count);
          
          return `
            <div class="archive-day-content ${index === 0 ? 'active' : ''}" data-index="${index}">
              <div class="archive-day-header">
                <h2 class="archive-day-title">${escapeHtml(isEn ? day.dateEn : day.date)}</h2>
                <span class="archive-day-subtitle">${escapeHtml(isEn ? day.date : day.dateEn)}</span>
              </div>
              
              <!-- RSSæ–‡ç« æ¿å— -->
              <div class="archive-section collapsed">
                <div class="archive-section-header">
                  <span class="archive-section-icon">ğŸ“¡</span>
                  <span class="archive-section-title">${isEn ? 'RSS Articles' : 'RSSæ–‡ç« '}</span>
                  <span class="archive-section-count">${day.rss?.length || 0}${isEn ? ' items' : 'ç¯‡'}</span>
                </div>
                <div class="archive-section-content">
                  ${rssResult.html}
                </div>
              </div>
              
              <!-- AIæ–°é—»æ¿å— -->
              <div class="archive-section collapsed">
                <div class="archive-section-header">
                  <span class="archive-section-icon">ğŸ¤–</span>
                  <span class="archive-section-title">${isEn ? 'AI News' : 'AIæ–°é—»'}</span>
                  <span class="archive-section-count">${day.ai?.length || 0}${isEn ? ' items' : 'ç¯‡'}</span>
                </div>
                <div class="archive-section-content">
                  ${aiResult.html}
                </div>
              </div>
              
              <!-- ä¸ªäººæ€è€ƒæ¿å— -->
              <div class="archive-section collapsed">
                <div class="archive-section-header">
                  <span class="archive-section-icon">ğŸ’­</span>
                  <span class="archive-section-title">${isEn ? 'Thoughts' : 'ä¸ªäººæ€è€ƒ'}</span>
                  <span class="archive-section-count">${day.thoughts?.length || 0}${isEn ? ' items' : 'ç¯‡'}</span>
                </div>
                <div class="archive-section-content">
                  ${renderArchiveThoughts(day.thoughts)}
                </div>
              </div>
              
              <!-- ä¸ªäººæ¨èæ¿å— -->
              <div class="archive-section collapsed">
                <div class="archive-section-header">
                  <span class="archive-section-icon">ğŸ“Œ</span>
                  <span class="archive-section-title">${isEn ? 'Recommendations' : 'ä¸ªäººæ¨è'}</span>
                  <span class="archive-section-count">${day.rec?.length || 0}${isEn ? ' items' : 'ç¯‡'}</span>
                </div>
                <div class="archive-section-content">
                  ${recResult.html}
                </div>
              </div>
            </div>
          `;
        }).join('')}
      </div>
    </div>
  `;
  
  // ç»‘å®šæ—¥æœŸåˆ‡æ¢äº‹ä»¶
  bindArchiveEvents();
}

// æ¸²æŸ“å½’æ¡£æ–‡ç« é¡¹ï¼ˆä½¿ç”¨ä»Šæ—¥æ­£æ–‡æ’ç‰ˆï¼‰- å¸¦ç¼–å·
function renderArchiveItems(items, type, startIndex = 0) {
  if (!items || items.length === 0) {
    const isEn = currentLang === 'en';
    return { html: '<div class="empty-state">' + (isEn ? 'No content' : 'æš‚æ— å†…å®¹') + '</div>', count: 0 };
  }
  
  const isEn = currentLang === 'en';
  let html = '';
  
  items.forEach((item, index) => {
    const globalIndex = startIndex + index + 1;
    const title = item.title || (isEn ? 'Untitled' : 'æ— æ ‡é¢˜');
    const summary = item.summary || '';
    const source = item.source || '';
    const url = item.url || '';
    const time = item.time || '';
    
    const linkHtml = url && url !== '#' ? `
      <div class="article-footer">
        <a href="${escapeHtml(url)}" target="_blank" class="article-link">${isEn ? 'Read more â†’' : 'é˜…è¯»å…¨æ–‡ â†’'}</a>
      </div>
    ` : '';
    
    html += `
      <div class="article-card archive-card" style="position: relative;">
        <span class="article-number">#${globalIndex}</span>
        <div class="article-header">
          <div class="article-title">${escapeHtml(title)}</div>
        </div>
        <div class="article-meta">
          ${source ? `<span class="article-source">${escapeHtml(source)}</span>` : ''}
          ${time ? `<span class="article-date">${escapeHtml(time)}</span>` : ''}
        </div>
        ${summary ? `<div class="article-summary">${escapeHtml(summary)}</div>` : ''}
        ${linkHtml}
      </div>
    `;
  });
  
  return { html, count: items.length };
}

// æ¸²æŸ“å½’æ¡£æ€è€ƒé¡¹
function renderArchiveThoughts(thoughts) {
  const isEn = currentLang === 'en';
  if (!thoughts || thoughts.length === 0) {
    return '<div class="empty-state">' + (isEn ? 'No thoughts' : 'æš‚æ— æ€è€ƒ') + '</div>';
  }
  
  return thoughts.map(item => `
    <div class="thought-card archive-thought">
      <div class="thought-content">${escapeHtml(item.content || '')}</div>
      <div class="thought-time">${escapeHtml(item.time || '')}</div>
    </div>
  `).join('');
}

// ç»‘å®šå½’æ¡£äº¤äº’äº‹ä»¶
function bindArchiveEvents() {
  const dateItems = document.querySelectorAll('.archive-date-item');
  const dayContents = document.querySelectorAll('.archive-day-content');
  
  dateItems.forEach(item => {
    item.addEventListener('click', () => {
      const index = item.dataset.index;
      
      // åˆ‡æ¢æ—¥æœŸé€‰ä¸­çŠ¶æ€
      dateItems.forEach(d => d.classList.remove('active'));
      item.classList.add('active');
      
      // åˆ‡æ¢å†…å®¹æ˜¾ç¤º
      dayContents.forEach(c => c.classList.remove('active'));
      document.querySelector(`.archive-day-content[data-index="${index}"]`).classList.add('active');
    });
  });
  
  // æ¿å—æŠ˜å /å±•å¼€
  const sectionHeaders = document.querySelectorAll('.archive-section-header');
  sectionHeaders.forEach(header => {
    header.addEventListener('click', () => {
      const section = header.parentElement;
      section.classList.toggle('collapsed');
    });
  });
}

// è½¬ä¹‰HTML
function escapeHtml(text) {
  if (!text) return '';
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// ä¸»é¢˜
function initTheme() {
  const saved = localStorage.getItem('dailyDigest_theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
    updateThemeBtn(saved);
  }
  
  document.getElementById('themeToggle')?.addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('dailyDigest_theme', next);
    updateThemeBtn(next);
  });
}

function updateThemeBtn(theme) {
  const btn = document.getElementById('themeToggle');
  if (btn) btn.textContent = theme === 'dark' ? 'â˜½' : 'â˜€';
}

// å¯¼èˆªåˆ‡æ¢
document.querySelectorAll('.nav-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.section)?.classList.add('active');
  });
});

// è¯­è¨€åˆ‡æ¢
document.getElementById('langToggle')?.addEventListener('click', () => {
  currentLang = currentLang === 'zh' ? 'en' : 'zh';
  
  // æ›´æ–°æŒ‰é’®æ–‡æœ¬
  const btn = document.getElementById('langToggle');
  if (btn) btn.textContent = currentLang === 'zh' ? 'EN/ä¸­' : 'ä¸­/EN';
  
  // é‡æ–°æ¸²æŸ“é¡µé¢
  renderAll();
  
  // ä¿å­˜è¯­è¨€åå¥½
  localStorage.setItem('dailyDigest_lang', currentLang);
});
