<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Daily Digest - AI 资产雷达</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/motion@11.11.13/dist/motion.js"></script>
  <!-- PWA 配置 -->
  <link rel="manifest" href="./assets/manifest-DLSCeyTJ.json">
  <meta name="theme-color" content="#0a0b0f">
  <script type="module" crossorigin src="./assets/main-CwXmB3aN.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/main-B7c16iak.css">
</head>
<body>
  <!-- 背景装饰 -->
  <div class="bg-aurora"></div>
  <div class="bg-grid"></div>

  <!-- 更新提示条 -->
  <div class="update-bar hidden" id="updateBar">
    <span>🚀 有新内容更新</span>
    <button id="refreshBtn">立即刷新</button>
    <button id="dismissUpdate">忽略</button>
  </div>

  <!-- 顶部导航 -->
  <nav class="top-nav glass">
    <div class="nav-brand">
      <div class="brand-icon">
        <span>AI</span>
      </div>
      <span class="brand-text text-gradient">Daily Digest</span>
    </div>
    <div class="nav-actions">
      <button class="nav-btn-icon" id="pushToggle" aria-label="开启推送" title="开启推送通知">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="pushIcon">
          <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
          <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
        </svg>
      </button>
      <button class="nav-btn-icon" id="filterBtn" aria-label="筛选">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
      </button>
    </div>
  </nav>

  <!-- 主内容区 -->
  <main class="main-container">
    <!-- 首页视图 -->
    <section class="view active" id="view-home">
      <header class="page-header">
        <h1 class="page-title">今日 AI 资产雷达</h1>
        <p class="page-subtitle">追踪 AI 领域核心动态与投资机会</p>
        <div class="last-update" id="lastUpdate">最后更新: 加载中...</div>
      </header>

      <!-- 今日必看 -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="section-icon">⭐</span>
            今日必看
          </h2>
          <span class="badge" id="resultCount">3 条</span>
        </div>
        <div id="featuredCard"></div>
      </section>

      <!-- 热点追踪 -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="section-icon">🔥</span>
            热点追踪
          </h2>
          <button class="text-btn" id="openTimeline">查看时间线 →</button>
        </div>
        <div class="topics-scroll" id="hotTopics"></div>
      </section>

      <!-- 快讯列表 -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="section-icon">📰</span>
            快讯
          </h2>
        </div>
        <div class="news-list" id="newsList"></div>
      </section>
    </section>

    <!-- 热点视图 -->
    <section class="view" id="view-hot">
      <header class="page-header">
        <h1 class="page-title">热点追踪</h1>
      </header>
      <div class="hot-full-list" id="hotFullList">
        <div class="empty-state">
          <div class="empty-icon">🔥</div>
          <p>热点内容正在整理中<br>请稍后再来查看</p>
        </div>
      </div>
    </section>

    <!-- 自选视图 -->
    <section class="view" id="view-watchlist">
      <header class="page-header">
        <h1 class="page-title">我的自选</h1>
      </header>
      <div class="watchlist-empty" id="watchlistEmpty">
        <div class="empty-icon">⭐</div>
        <p>点击新闻卡片中的股票标签<br>添加到你的自选列表</p>
      </div>
      <div class="watchlist-content hidden" id="watchlistContent"></div>
    </section>

    <!-- 我的视图 -->
    <section class="view" id="view-profile">
      <header class="page-header">
        <h1 class="page-title">个人中心</h1>
      </header>
      <div class="profile-menu">
        <div class="menu-item" id="pushSettings">
          <span>推送通知</span>
          <span class="menu-value" id="pushStatus">未开启</span>
        </div>
        <div class="menu-item">
          <span>API Key 设置</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </div>
        <div class="menu-item">
          <span>主题切换</span>
          <span class="menu-value">深色</span>
        </div>
        <div class="menu-item">
          <span>关于 Daily Digest</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </div>
      </div>
    </section>
  </main>

  <!-- 底部导航 -->
  <nav class="bottom-nav glass-strong" aria-label="底部导航">
    <button class="nav-tab active" data-view="home">
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <span class="nav-label">首页</span>
    </button>
    <button class="nav-tab" data-view="hot">
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path>
      </svg>
      <span class="nav-label">热点</span>
    </button>
    <button class="nav-tab" data-view="watchlist">
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
      </svg>
      <span class="nav-label">自选</span>
    </button>
    <button class="nav-tab" data-view="profile">
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span class="nav-label">我的</span>
    </button>
  </nav>

  <!-- 时间线页面 -->
  <section class="timeline-page hidden" id="timelinePage">
    <header class="timeline-header glass">
      <button id="closeTimeline" class="icon-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="m15 18-6-6 6-6"></path>
        </svg>
      </button>
      <h2>事件时间线</h2>
      <div class="w-10"></div>
    </header>
    <div class="timeline-content">
      <div class="timeline-list" id="timelineList"></div>
      <div class="timeline-stocks" id="timelineStocks"></div>
    </div>
  </section>

  <!-- 底部弹层 -->
  <div class="sheet-overlay hidden" id="sheetOverlay"></div>

  <section class="bottom-sheet hidden" id="termSheet">
    <div class="sheet-handle"></div>
    <div class="sheet-content" id="termSheetContent"></div>
  </section>

  <section class="bottom-sheet hidden" id="filterSheet">
    <div class="sheet-handle"></div>
    <div class="sheet-content">
      <header class="sheet-header">
        <h3>智能筛选</h3>
        <span class="filter-count" id="filterCount">匹配 3 条</span>
      </header>
      <div class="filter-body">
        <div class="filter-group">
          <label>信源类型</label>
          <div class="chip-group" id="sourceFilters"></div>
        </div>
        <div class="filter-group">
          <label>影响范围</label>
          <div class="chip-group" id="impactFilters"></div>
        </div>
        <div class="filter-group">
          <label>热度等级</label>
          <div class="chip-group" id="heatFilters"></div>
        </div>
      </div>
      <div class="sheet-footer">
        <button class="btn-secondary" id="resetFilters">重置</button>
        <button class="btn-primary" id="applyFilters">应用</button>
      </div>
    </div>
  </section>

  <!-- Service Worker 注册 -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js')
        .then(reg => console.log('[SW] 注册成功'))
        .catch(err => console.log('[SW] 注册失败:', err));
    }
  </script>
</body>
</html>
